<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hair Salon - Elegance and Style</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F5;
            color: #1a1a1a;
            overflow-x: hidden;
        }

        .hero-section {
            background-image: url('https://placehold.co/1920x1080/444444/999999?text=Modern+Salon+Interior');
            background-size: cover;
            background-position: center;
        }

        .nav-link:hover {
            color: #d1b490;
        }

        .scroll-fade {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 1s ease-out, transform 1s ease-out;
        }

        .scroll-fade.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .loading-dots {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .loading-dots div {
            width: 10px;
            height: 10px;
            background-color: #1a1a1a;
            border-radius: 50%;
            margin: 0 5px;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .loading-dots div:nth-child(1) { animation-delay: -0.32s; }
        .loading-dots div:nth-child(2) { animation-delay: -0.16s; }
        .loading-dots div:nth-child(3) { animation-delay: 0s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }
    </style>
</head>
<body>

<!-- Hero Section with Navigation -->
<header class="hero-section relative h-screen w-screen flex flex-col justify-center items-center text-white p-8">
    <!-- Overlay -->
    <div class="absolute inset-0 bg-black bg-opacity-60"></div>

    <!-- Navigation -->
    <nav class="absolute top-0 left-0 right-0 p-8 flex justify-between items-center z-10">
        <h1 class="font-bold text-2xl tracking-widest uppercase font-serif">
            <span class="text-white">Style</span><span class="text-amber-500">Hub</span>
        </h1>
        <ul class="flex space-x-8">
            <li><a href="#services" class="nav-link text-white transition-colors duration-300">Services</a></li>
            <li><a href="#shop" class="nav-link text-white transition-colors duration-300">Shop</a></li>
            <li><a href="#contact" class="nav-link text-white transition-colors duration-300">Contact</a></li>
            <li><a href="#" class="nav-link text-white border border-white px-4 py-2 rounded-full transition-colors duration-300 hover:bg-white hover:text-black">Book Now</a></li>
        </ul>
    </nav>

    <!-- Hero Content -->
    <div class="relative z-10 text-center px-4">
        <h2 class="text-6xl md:text-8xl font-serif leading-tight mb-4 tracking-wider animate-fade-in-down">
            Elegance in Every Detail
        </h2>
        <p class="text-lg md:text-xl max-w-2xl mx-auto mb-8 font-extralight tracking-wide animate-fade-in">
            Where tradition meets modern style. We craft beauty through precision and passion.
        </p>
    </div>
</header>

<!-- Services Section -->
<section id="services" class="py-24 bg-white">
    <div class="container mx-auto px-4">
        <h2 class="text-5xl font-serif text-center mb-16 scroll-fade">Our Services</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <!-- Hairdressing -->
            <div class="flex flex-col items-center text-center scroll-fade">
                <img src="https://placehold.co/300x200/cccccc/333333?text=Hair+Styling" alt="Hairdressing" class="w-full rounded-xl shadow-md mb-4">
                <h3 class="text-2xl font-serif mb-2">Hairdressing</h3>
                <p class="text-gray-600">From classic cuts to modern styles, our stylists create the perfect look for you.</p>
            </div>
            <!-- Manicure -->
            <div class="flex flex-col items-center text-center scroll-fade">
                <img src="https://placehold.co/300x200/cccccc/333333?text=Manicure+Service" alt="Manicure" class="w-full rounded-xl shadow-md mb-4">
                <h3 class="text-2xl font-serif mb-2">Manicure</h3>
                <p class="text-gray-600">Nail care, shaping, and beautiful polish that lasts.</p>
            </div>
            <!-- Pedicure -->
            <div class="flex flex-col items-center text-center scroll-fade">
                <img src="https://placehold.co/300x200/cccccc/333333?text=Pedicure+Service" alt="Pedicure" class="w-full rounded-xl shadow-md mb-4">
                <h3 class="text-2xl font-serif mb-2">Pedicure</h3>
                <p class="text-gray-600">Relax and refresh with our professional pedicure services.</p>
            </div>
            <!-- Make Up -->
            <div class="flex flex-col items-center text-center scroll-fade">
                <img src="https://placehold.co/300x200/cccccc/333333?text=Make-Up+Application" alt="Make Up" class="w-full rounded-xl shadow-md mb-4">
                <h3 class="text-2xl font-serif mb-2">Make Up</h3>
                <p class="text-gray-600">Expert make-up application for any occasion, from natural to dramatic.</p>
            </div>
        </div>
    </div>
</section>

<!-- Personal Style Consultation Section -->
<section id="consultation" class="py-24 bg-gray-100">
    <div class="container mx-auto px-4">
        <h2 class="text-5xl font-serif text-center mb-16 scroll-fade">Personal Style Consultation</h2>
        <div class="bg-white p-8 rounded-xl shadow-md max-w-3xl mx-auto text-center scroll-fade">
            <p class="text-lg text-gray-600 mb-6">Describe the hairstyle or makeup look you're dreaming of, and we'll provide a personalized recommendation.</p>
            <textarea id="style-input" rows="4" class="w-full border-2 border-gray-300 rounded-lg p-4 mb-4 focus:outline-none focus:border-amber-500 transition-colors duration-300" placeholder="e.g., A sleek, modern bob for straight, fine hair." spellcheck="false"></textarea>
            <button id="consult-btn" class="bg-black text-white px-8 py-4 rounded-full text-lg transition-colors duration-300 hover:bg-gray-800">
                ✨ Get a Style Consultation ✨
            </button>
            <div id="loading-indicator" class="mt-8 hidden">
                <div class="loading-dots">
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
            </div>
            <div id="response-container" class="mt-8 text-left hidden">
                <h3 class="text-2xl font-serif mb-2">Your Personalized Look:</h3>
                <p id="gemini-response" class="text-gray-700"></p>
                <button id="read-aloud-btn" class="mt-4 bg-amber-500 text-white px-6 py-2 rounded-full text-sm transition-colors duration-300 hover:bg-amber-600">Read Aloud</button>
            </div>
        </div>
    </div>
</section>

<!-- Product Shop Section -->
<section id="shop" class="py-24 bg-white">
    <div class="container mx-auto px-4">
        <h2 class="text-5xl font-serif text-center mb-16 scroll-fade">Our Products</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Product 1 -->
            <div class="bg-gray-100 p-6 rounded-xl shadow-md text-center scroll-fade">
                <img src="https://placehold.co/300x300/dddddd/333333?text=Hair+Care+Product" alt="Product 1" class="w-full rounded-lg mb-4">
                <h3 class="text-xl font-serif">Luxury Shampoo</h3>
                <p class="text-gray-600 mb-4">A rejuvenating formula for healthy, shiny hair.</p>
                <button class="bg-black text-white px-6 py-2 rounded-full transition-colors duration-300 hover:bg-gray-800">Buy Now</button>
            </div>
            <!-- Product 2 -->
            <div class="bg-gray-100 p-6 rounded-xl shadow-md text-center scroll-fade">
                <img src="https://placehold.co/300x300/dddddd/333333?text=Styling+Gel" alt="Product 2" class="w-full rounded-lg mb-4">
                <h3 class="text-xl font-serif">Hair Conditioner</h3>
                <p class="text-gray-600 mb-4">Deeply hydrates and strengthens your hair.</p>
                <button class="bg-black text-white px-6 py-2 rounded-full transition-colors duration-300 hover:bg-gray-800">Buy Now</button>
            </div>
            <!-- Product 3 -->
            <div class="bg-gray-100 p-6 rounded-xl shadow-md text-center scroll-fade">
                <img src="https://placehold.co/300x300/dddddd/333333?text=Hair+Oil" alt="Product 3" class="w-full rounded-lg mb-4">
                <h3 class="text-xl font-serif">Finishing Serum</h3>
                <p class="text-gray-600 mb-4">Adds a final shine and tames frizz.</p>
                <button class="bg-black text-white px-6 py-2 rounded-full transition-colors duration-300 hover:bg-gray-800">Buy Now</button>
            </div>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section id="contact" class="py-24 bg-gray-100">
    <div class="container mx-auto px-4 text-center">
        <h2 class="text-5xl font-serif mb-4 scroll-fade">Book Your Appointment</h2>
        <p class="text-lg text-gray-600 mb-12 max-w-2xl mx-auto scroll-fade">
            Ready for a transformation? Contact us today to schedule your next visit.
        </p>
        <a href="#" class="bg-black text-white px-8 py-4 rounded-full text-lg transition-colors duration-300 hover:bg-gray-800 scroll-fade">Book Now</a>
    </div>
</section>

<!-- Footer -->
<footer class="bg-black text-gray-400 py-12">
    <div class="container mx-auto text-center">
        <p>&copy; 2024 Hair Salon. All Rights Reserved.</p>
    </div>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const sections = document.querySelectorAll('.scroll-fade');

        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.2
        };

        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        sections.forEach(section => {
            observer.observe(section);
        });

        // --- Gemini API Functionality ---
        const consultBtn = document.getElementById('consult-btn');
        const styleInput = document.getElementById('style-input');
        const loadingIndicator = document.getElementById('loading-indicator');
        const responseContainer = document.getElementById('response-container');
        const geminiResponse = document.getElementById('gemini-response');
        const readAloudBtn = document.getElementById('read-aloud-btn');

        let currentAudio = null;

        consultBtn.addEventListener('click', async () => {
            const userQuery = styleInput.value.trim();
            if (userQuery === "") {
                return;
            }

            geminiResponse.textContent = '';
            responseContainer.classList.add('hidden');
            loadingIndicator.classList.remove('hidden');
            consultBtn.disabled = true;

            // Construct the Gemini API payload
            const systemPrompt = "You are a professional hairstylist and makeup artist. Based on the user's description, provide a detailed description of the style and suggest a suitable product from a salon. The available products are: Luxury Shampoo, Hair Conditioner, Finishing Serum. Format your response with a header for the style description and another for the product recommendation.";
            const promptText = `Describe the look: ${userQuery}. Also recommend one product from the list: Luxury Shampoo, Hair Conditioner, Finishing Serum.`;

            const payload = {
                contents: [{ parts: [{ text: promptText }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            let retryCount = 0;
            const maxRetries = 3;
            let responseText = '';

            while (retryCount < maxRetries) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`API call failed with status: ${response.status}`);
                    }

                    const result = await response.json();
                    const candidate = result.candidates?.[0];

                    if (candidate && candidate.content?.parts?.[0]?.text) {
                        responseText = candidate.content.parts[0].text;
                        break;
                    } else {
                         throw new Error("Invalid response format from API.");
                    }
                } catch (error) {
                    console.error('Error fetching from Gemini API:', error);
                    retryCount++;
                    if (retryCount < maxRetries) {
                        await new Promise(res => setTimeout(res, Math.pow(2, retryCount) * 1000));
                    } else {
                        responseText = 'Sorry, I couldn\'t generate a consultation right now. Please try again later.';
                    }
                }
            }

            loadingIndicator.classList.add('hidden');
            consultBtn.disabled = false;
            geminiResponse.textContent = responseText;
            responseContainer.classList.remove('hidden');
        });

        // TTS functionality
        readAloudBtn.addEventListener('click', async () => {
            const textToSpeak = geminiResponse.textContent;
            if (!textToSpeak) {
                return;
            }

            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }

            readAloudBtn.textContent = 'Loading...';
            readAloudBtn.disabled = true;

            const payload = {
                contents: [{ parts: [{ text: textToSpeak }] }],
                generationConfig: {
                    responseModalities: ["AUDIO"],
                    speechConfig: {
                        voiceConfig: {
                            prebuiltVoiceConfig: { voiceName: "Kore" }
                        }
                    }
                },
                model: "gemini-2.5-flash-preview-tts"
            };
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`TTS API call failed with status: ${response.status}`);
                }

                const result = await response.json();
                const part = result?.candidates?.[0]?.content?.parts?.[0];
                const audioData = part?.inlineData?.data;
                const mimeType = part?.inlineData?.mimeType;

                if (audioData && mimeType && mimeType.startsWith("audio/")) {
                    const sampleRateMatch = mimeType.match(/rate=(\d+)/);
                    const sampleRate = sampleRateMatch ? parseInt(sampleRateMatch[1], 10) : 16000;
                    const pcmData = base64ToArrayBuffer(audioData);
                    const pcm16 = new Int16Array(pcmData);
                    const wavBlob = pcmToWav(pcm16, sampleRate);
                    const audioUrl = URL.createObjectURL(wavBlob);
                    currentAudio = new Audio(audioUrl);
                    currentAudio.play();
                    currentAudio.onended = () => {
                        URL.revokeObjectURL(audioUrl);
                        currentAudio = null;
                    };
                } else {
                    throw new Error("Invalid TTS response format.");
                }
            } catch (error) {
                console.error('Error fetching TTS audio:', error);
                geminiResponse.textContent = 'Sorry, I couldn\'t generate the audio. Please try again later.';
            } finally {
                readAloudBtn.textContent = 'Read Aloud';
                readAloudBtn.disabled = false;
            }
        });

        // Helper functions for TTS
        function base64ToArrayBuffer(base64) {
            const binaryString = atob(base64);
            const len = binaryString.length;
            const bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }
            return bytes.buffer;
        }

        function pcmToWav(pcmData, sampleRate) {
            const pcmLength = pcmData.length * 2;
            const buffer = new ArrayBuffer(44 + pcmLength);
            const view = new DataView(buffer);

            writeString(view, 0, 'RIFF');
            view.setUint32(4, 36 + pcmLength, true);
            writeString(view, 8, 'WAVE');
            writeString(view, 12, 'fmt ');
            view.setUint32(16, 16, true);
            view.setUint16(20, 1, true); // PCM format
            view.setUint16(22, 1, true); // 1 channel
            view.setUint32(24, sampleRate, true);
            view.setUint32(28, sampleRate * 2, true);
            view.setUint16(32, 2, true); // block align
            view.setUint16(34, 16, true); // bits per sample
            writeString(view, 36, 'data');
            view.setUint32(40, pcmLength, true);

            let offset = 44;
            for (let i = 0; i < pcmData.length; i++, offset += 2) {
                view.setInt16(offset, pcmData[i], true);
            }

            return new Blob([view], { type: 'audio/wav' });
        }

        function writeString(view, offset, string) {
            for (let i = 0; i < string.length; i++) {
                view.setUint8(offset + i, string.charCodeAt(i));
            }
        }
    });
</script>

</body>
</html>
